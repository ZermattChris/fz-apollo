(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Pay"],{1865:function(t,e,r){"use strict";r("d2c1")},"1e2d":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"stepThanks"},[r("PageHeader",{attrs:{title:"Payment Cancelled"}},[t._v(" Payment didn't work for whatever reason. Give a message and probably just go back to the normal payment page... (let them try a different payment method) ")])],1)},a=[],s=r("36ad"),i={name:"Step_Cancelled",components:{PageHeader:s["a"]},data:function(){return{}},created:function(){},computed:{},methods:{}},o=i,c=(r("9473"),r("2877")),d=Object(c["a"])(o,n,a,!1,null,"8ba67874",null);e["default"]=d.exports},"1f4f":function(t,e,r){"use strict";r("a9e3");var n=r("5530"),a=(r("8b37"),r("80d2")),s=r("7560"),i=r("58df");e["a"]=Object(i["a"])(s["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(n["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(a["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"2e0e":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"stepPay"},[r("PageHeader",{attrs:{title:"4. Place Order"}},[t._v(" Using Stripe checkout to handle our online payments here. This is currently just a test environment. ")]),[r("v-simple-table",{staticClass:"elevation-1",attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[t._v(" Qty ")]),r("th",{staticClass:"text-left"},[t._v(" Description ")]),r("th",{staticClass:"text-left"},[t._v(" Price in CHF ")])])]),r("tbody",[r("tr",[r("td",[t._v("2")]),r("td",[t._v(t._s(t.orderLineItems.name)+" Flight")]),r("td",[t._v(t._s(t.orderLineItems.price_CHF)+".-")])]),r("tr",[r("td",[t._v("2")]),r("td",[t._v("Photos & Videos")]),r("td",[t._v("40.-")])]),r("tr",[r("td",{staticClass:"grey--text text-caption",staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v(" This row will display total prices ")])])])]},proxy:!0}])})],r("div",{staticClass:"mt-4",staticStyle:{"text-align":"center"},attrs:{id:"payment-button-box"}},[r("v-btn",{ref:"paymentButton",staticClass:"mt-4",attrs:{id:"payment-button",type:"submit",color:"warning darken-1"},on:{click:t.onOrderBtn}},[t._v(" Pay Now ")])],1),r("br"),r("br"),t._m(0),t._m(1)],2)},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v(" Copy one of the numbers below to test payment on the Stripe page. "),r("br"),t._v(" "),r("br"),t._v(" Use any email, card date (in future), CVC and Name on card. ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("Visa standard card with success: 4000007560000009 "),r("br")]),r("li",[t._v("3D Secure with success: 4000002500003155")]),r("li",[t._v("Fail, insuffecient funds: 4000000000009995")]),r("li",[t._v("Fail, card has expired: 4000000000000069")])])}],s=(r("d3b7"),r("96cf"),r("1da1")),i=r("36ad"),o="https://js.stripe.com/v3",c=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,d="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",l=function(){for(var t=document.querySelectorAll('script[src^="'.concat(o,'"]')),e=0;e<t.length;e++){var r=t[e];if(c.test(r.src))return r}return null},u=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(o).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},h=function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.12.1",startTime:e})},p=null,f=function(t){return null!==p||(p=new Promise((function(e,r){if("undefined"!==typeof window)if(window.Stripe&&t&&console.warn(d),window.Stripe)e(window.Stripe);else try{var n=l();n&&t?console.warn(d):n||(n=u(t)),n.addEventListener("load",(function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))})),n.addEventListener("error",(function(){r(new Error("Failed to load Stripe.js"))}))}catch(a){return void r(a)}else e(null)}))),p},m=function(t,e,r){if(null===t)return null;var n=t.apply(void 0,e);return h(n,r),n},v=Promise.resolve().then((function(){return f(null)})),b=!1;v["catch"]((function(t){b||console.warn(t)}));var w=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];b=!0;var n=Date.now();return v.then((function(t){return m(t,e,n)}))},_={name:"Step_Pay",components:{PageHeader:i["a"]},data:function(){return{stripe:null,hasCardErrors:!1,payEnabled:!1,payLoading:!1,message:" - - ",elements:void 0,card:void 0}},created:function(){},mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,w(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_STRIPE_PUBLIC_KEY_TEST);case 2:t.stripe=e.sent;case 3:case"end":return e.stop()}}),e)})))()},computed:{orderLineItems:function(){return this.$store.getters.getFlightFromID(300)}},methods:{onOrderBtn:function(){var t=this,e={email:this.$store.state.contactEmail,orderId:this.$store.state.orderID,flightId:this.$store.state.selectedFlight,photos:this.$store.state.wantsPhotos};fetch("https://gateway.flyzermatt.com/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t.json()})).then((function(e){return this.$store.dispatch("setOrderId",e.orderId),t.stripe.redirectToCheckout({sessionId:e.id})})).then((function(t){t.error&&alert(t.error.message)})).catch((function(t){console.log("Getting an error back in the 'catch'"),console.error("Error:",t)}))}},watch:{}},g=_,y=(r("1865"),r("2877")),S=r("6544"),x=r.n(S),C=r("8336"),E=r("1f4f"),P=Object(y["a"])(g,n,a,!1,null,"5141c99c",null);e["default"]=P.exports;x()(P,{VBtn:C["a"],VSimpleTable:E["a"]})},"8b37":function(t,e,r){},9473:function(t,e,r){"use strict";r("b321")},b321:function(t,e,r){},d2c1:function(t,e,r){}}]);
//# sourceMappingURL=Pay.f9f37a2a.js.map