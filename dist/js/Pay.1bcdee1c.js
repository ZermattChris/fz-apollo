(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Pay"],{1681:function(t,e,s){},"1e2d":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stepThanks"},[s("PageHeader",{attrs:{title:"Payment Cancelled"}},[t._v(" Payment didn't work for whatever reason. Give a message and probably just go back to the normal payment page... (let them try a different payment method) ")])],1)},n=[],r=s("36ad"),i={name:"Step_Cancelled",components:{PageHeader:r["a"]},data:function(){return{}},created:function(){},computed:{},methods:{}},o=i,l=(s("9473"),s("2877")),c=Object(l["a"])(o,a,n,!1,null,"8ba67874",null);e["default"]=c.exports},"1f4f":function(t,e,s){"use strict";s("a9e3");var a=s("5530"),n=(s("8b37"),s("80d2")),r=s("7560"),i=s("58df");e["a"]=Object(i["a"])(r["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(a["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(n["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"2e0e":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"stepPay"},[s("PageHeader",{attrs:{title:"4. Place Order"}},[t._v(" Add any other information or questions to the Booking Message and place your order. ")]),s("div",{staticStyle:{"max-width":"600px",margin:"0 auto"}},[s("p",[s("v-chip",{staticClass:"pl-4 pr-6",attrs:{color:"deep-orange",id:"passenger-btn"}},[t._v(" "+t._s(t.totalPassengers)+" ")]),t._v(" "+t._s(1==t.totalPassengers?"Person":"People")+" flying - "+t._s(t.flightDate)+" ")],1),[s("v-simple-table",{staticClass:"elevation-1",attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",{staticClass:"grey lighten-3"},[s("th",{staticClass:"text-left"},[t._v(" Qty ")]),s("th",{staticClass:"text-left"},[t._v(" Description ")]),s("th",{staticClass:"text-right"},[t._v(" Subtotal in CHF ")]),s("th",{staticClass:"text-left"})])]),s("tbody",[s("tr",[s("td",[t._v(t._s(t.totalPassengers))]),s("td",[s("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.flightDetails.name)+" Flight")]),t._v(" @ "+t._s(t.flightDetails.price)+t._s(" ")+"CHF")]),s("td",{staticClass:"text-right"},[t._v(t._s(t.totalPassengers*t.flightDetails.price)+".00")]),s("td")]),t.wantsPhotos?s("tr",[s("td",[t._v(t._s(t.totalPassengers))]),s("td",[s("span",{staticStyle:{"font-weight":"bold"}},[t._v("Photos & Videos")]),t._v(" @ "+t._s(t.videoPrice)+".00"+t._s(" ")+"CHF")]),s("td",{staticClass:"text-right"},[t._v(t._s(t.totalPassengers*t.videoPrice)+".00")]),s("td")]):t._e(),s("tr",{staticClass:"grey lighten-3"},[s("td"),s("td",{staticStyle:{"text-align":"right","font-weight":"bold"}},[t._v("Total CHF")]),s("td",{staticClass:"text-right"},[s("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.totalPassengers*t.flightDetails.price+t.totalPassengers*t.videoPrice)+".00")])]),s("td")])])]},proxy:!0}])})],s("p",{staticClass:"text-caption mt-4 mx-4"},[t._v(" TODO: We need a (collapsable?) message telling the user to let us know if they want to meet on the mountain instead of at the office, etc. ")]),s("v-textarea",{staticClass:"mt-6 mx-auto",staticStyle:{"max-width":"600px"},attrs:{name:"booking-message",outlined:"",label:"Booking Message (optional)","auto-grow":"",hint:"Enter extra passenger infos or questions here."},on:{blur:t.onMessageBlur},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),s("div",{staticStyle:{"text-align":"center"},attrs:{id:"payment-button-box"}},[s("v-btn",{ref:"paymentButton",staticClass:"mt-4",attrs:{id:"payment-button",type:"submit",color:"warning darken-1"},on:{click:t.onOrderBtn}},[t._v(" Pay Now ")])],1),s("br"),s("br"),t._m(0),t._m(1)],2)],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[t._v(" Copy one of the numbers below to test payment on the Stripe page. "),s("br"),t._v(" "),s("br"),t._v(" Use any email, card date (in future), CVC and Name on card. ")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",[s("li",[t._v("Visa standard card with success: 4000007560000009 "),s("br")]),s("li",[t._v("3D Secure with success: 4000002500003155")]),s("li",[t._v("Fail, insuffecient funds: 4000000000009995")]),s("li",[t._v("Fail, card has expired: 4000000000000069")])])}],r=(s("d3b7"),s("96cf"),s("1da1")),i=s("36ad"),o=s("b166"),l=s("e3ee"),c="https://js.stripe.com/v3",d=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,u="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",h=function(){for(var t=document.querySelectorAll('script[src^="'.concat(c,'"]')),e=0;e<t.length;e++){var s=t[e];if(d.test(s.src))return s}return null},p=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",s=document.createElement("script");s.src="".concat(c).concat(e);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(s),s},f=function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.12.1",startTime:e})},g=null,m=function(t){return null!==g||(g=new Promise((function(e,s){if("undefined"!==typeof window)if(window.Stripe&&t&&console.warn(u),window.Stripe)e(window.Stripe);else try{var a=h();a&&t?console.warn(u):a||(a=p(t)),a.addEventListener("load",(function(){window.Stripe?e(window.Stripe):s(new Error("Stripe.js not available"))})),a.addEventListener("error",(function(){s(new Error("Failed to load Stripe.js"))}))}catch(n){return void s(n)}else e(null)}))),g},v=function(t,e,s){if(null===t)return null;var a=t.apply(void 0,e);return f(a,s),a},b=Promise.resolve().then((function(){return m(null)})),w=!1;b["catch"]((function(t){w||console.warn(t)}));var y=function(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];w=!0;var a=Date.now();return b.then((function(t){return v(t,e,a)}))},_={name:"Step_Pay",components:{PageHeader:i["a"]},data:function(){return{stripe:null,hasCardErrors:!1,payEnabled:!1,payLoading:!1,message:this.$store.state.orderMessage,elements:void 0,card:void 0,flightDetails:this.$store.getters.getFlightFromID(this.$store.state.selectedFlight),totalPassengers:this.$store.state.totalPassengers,wantsPhotos:this.$store.state.wantsPhotos,videoPrice:this.$store.state._videoPrice}},mounted:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,y("pk_test_51ION3qE6VjXXKzJ2c9Lxf0eoYCe6BuizG3Q7OrsNIEOWA4NMlpP3ycbEW7KwaFpJYlA4MFOeosbDuyJuIWMS5xn200GcQxogOw");case 2:t.stripe=e.sent;case 3:case"end":return e.stop()}}),e)})))()},computed:{flightDate:function(){return Object(o["a"])(Object(l["a"])(this.$store.state.flightDate),"EE, MMMM do, yyyy")}},methods:{onMessageBlur:function(){this.$store.dispatch("setOrderMessage",this.message)},onOrderBtn:function(){var t=this,e=this.$store.state.orderID;""!==e&&void 0!==e||(e=null);var s={orderId:e,isTest:!0,email:this.$store.state.contactEmail,phone:this.$store.state.contactPhone,totalPassengers:this.totalPassengers,flightDate:this.$store.state.flightDate,dateRange:{start:this.$store.state.arriveDate,end:this.$store.state.departDate},flightId:this.$store.state.selectedFlight,photos:this.$store.state.wantsPhotos,passengerJSON:this.$store.state.passengerObjList,slotJSON:this.$store.state.slotPassengersObj,orderMessage:this.$store.state.orderMessage};fetch("https://bookings.simpleitsolutions.ch/api/createcheckout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:s})}).then((function(t){return t.json()})).then((function(e){return e.orderId>0&&t.$store.dispatch("setOrderId",e.orderId),t.stripe.redirectToCheckout({sessionId:e.stripeSessionId})})).then((function(t){t.error&&alert(t.error.message)})).catch((function(t){console.log("Getting an error back in the 'catch'"),console.error("Error:",t)}))}}},x=_,P=(s("9b1f"),s("2877")),$=s("6544"),S=s.n($),C=s("8336"),O=s("cc20"),j=s("1f4f"),k=(s("a9e3"),s("5530")),E=(s("1681"),s("8654")),I=s("58df"),H=Object(I["a"])(E["a"]),D=H.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(k["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},E["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(s,e)+"px"}},genInput:function(){var t=E["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){E["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),F=Object(P["a"])(x,a,n,!1,null,"32d69da8",null);e["default"]=F.exports;S()(F,{VBtn:C["a"],VChip:O["a"],VSimpleTable:j["a"],VTextarea:D})},"65f07":function(t,e,s){},"8b37":function(t,e,s){},9473:function(t,e,s){"use strict";s("b321")},"9b1f":function(t,e,s){"use strict";s("65f07")},b321:function(t,e,s){}}]);
//# sourceMappingURL=Pay.1bcdee1c.js.map