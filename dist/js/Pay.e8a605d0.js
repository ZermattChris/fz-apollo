(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Pay"],{"0a39":function(t,e,a){},"0aa2":function(t,e,a){"use strict";a("0a39")},1681:function(t,e,a){},"1f09":function(t,e,a){},"2e0e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stepPay"},[a("PageHeader",{attrs:{title:"4. "+t.$t("step-pay.title")}},[t._v(" "+t._s(t.$t("step-pay.description"))+" ")]),a("div",{staticStyle:{"max-width":"600px",margin:"0 auto"}},[a("p",{staticClass:"ml-3"},[a("v-icon",{attrs:{color:"primary"}},[t._v(" mdi-airplane-takeoff ")]),t._v(" "+t._s(t.meetingTimesString)+" "+t._s(t.flightDate)+" ")],1),a("p",{staticClass:"rounded-lg white--text text-caption mt-n2 mb-9 mx-4 px-2 py-1",staticStyle:{"background-color":"#c78b48"}},[t._v(" "+t._s(t.$t("step-pay.meetingTime"))+" "),a("strong",[a("a",{staticClass:"white--text text-decoration-underline",on:{click:function(e){t.findOfficeDialog=!0}}},[t._v(" "+t._s(t.$t("findOffice.linkText"))+" "),a("v-icon",{attrs:{color:"white","x-small":""}},[t._v(" mdi-open-in-new ")])],1)])]),[a("v-simple-table",{staticClass:"elevation-1",attrs:{dense:"",id:"scrollTarget"},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",{staticClass:"grey lighten-3"},[a("th",{staticClass:"text-left"},[t._v(" "+t._s(t.$t("step-pay.qty"))+" ")]),a("th",{staticClass:"text-left"},[t._v(" "+t._s(t.$t("step-pay.flightDescription"))+" ")]),a("th",{staticClass:"text-right"},[t._v(" "+t._s(t.$t("step-pay.subtotalCHF"))+" ")]),a("th",{staticClass:"text-left"})])]),a("tbody",[a("tr",[a("td",[t._v(t._s(t.totalPassengers))]),a("td",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.flightDetails.name)+" Flight")]),t._v(" @ "+t._s(t.flightDetails.price)+t._s(" ")+"CHF")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.totalPassengers*t.flightDetails.price)+".00")]),a("td")]),t.wantsPhotos?a("tr",[a("td",[t._v(t._s(t.totalPassengers))]),a("td",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.$t("step-pay.photosVideos")))]),t._v(" @ "+t._s(t.videoPrice)+".00"+t._s(" ")+"CHF")]),a("td",{staticClass:"text-right"},[t._v(t._s(t.totalPassengers*t.videoPrice)+".00")]),a("td")]):t._e(),a("tr",{staticClass:"grey lighten-3"},[a("td"),a("td",{staticStyle:{"text-align":"right","font-weight":"bold"}},[t._v(" "+t._s(t.$t("step-pay.totalCHF"))+" ")]),t.wantsPhotos?a("td",{staticClass:"text-right"},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.totalPassengers*t.flightDetails.price+t.totalPassengers*t.videoPrice)+".00")])]):t._e(),t.wantsPhotos?t._e():a("td",{staticClass:"text-right"},[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.totalPassengers*t.flightDetails.price)+".00")])]),a("td")])])]},proxy:!0}])})],[a("v-row",{staticClass:"text-caption mx-1 mt-8 mb-10",attrs:{justify:"center"}},[a("v-expansion-panels",[a("v-expansion-panel",[a("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},on:{click:function(e){return t.focusBookingMessage()}},scopedSlots:t._u([{key:"actions",fn:function(){return[a("v-icon",{attrs:{color:"warning"}},[t._v(" mdi-information-outline ")])]},proxy:!0}])},[a("strong",[t._v(t._s(t.$t("step-pay.clickForSpecialRequests")))])]),a("v-expansion-panel-content",[a("p",{staticClass:"text-caption mt-0 mx-4",attrs:{id:"questionsTxt"}},[t._v(" "+t._s(t.$t("step-pay.specialWishes"))+" ")]),a("v-textarea",{ref:"bookingMessage",staticClass:"mt-6 mx-auto",staticStyle:{"max-width":"600px"},attrs:{name:"booking-message",outlined:"",label:t.$t("step-pay.yourMsgHere"),"auto-grow":""},on:{blur:t.onMessageBlur},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}})],1)],1)],1)],1)],a("div",{attrs:{id:"stripe-payment-box"}},[t.stripePaymentFormLoading?a("v-skeleton-loader",{attrs:{type:"article, actions"}}):t._e(),a("form",{attrs:{id:"stripe-payment-form"},on:{submit:function(e){return e.preventDefault(),t.onOrderBtn.apply(null,arguments)}}},[a("div",{staticStyle:{"min-height":"210px"},attrs:{id:"stripe-payment-element"}}),a("v-container",{staticClass:"px-0 pt-0",staticStyle:{"max-width":"400px",margin:"0 auto","text-align":"center"},attrs:{fluid:""}},[a("v-checkbox",{attrs:{color:"orange darken-3"},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",{attrs:{id:"TCs-Box"}},[t._v(" "+t._s(t.$t("step-pay.tc-text-start"))+" "),a("v-tooltip",{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on;return[a("a",t._g({attrs:{target:"_blank",href:"https://www.flyzermatt.com/terms-and-conditions#onlinepayments"},on:{click:function(t){t.stopPropagation()}}},n),[t._v(t._s(t.$t("step-pay.tc-text-link")))])]}}])},[t._v(" "+t._s(t.$t("step-pay.openInNewPage"))+" ")]),t._v(" "+t._s(t.$t("step-pay.tc-text-end"))+" ")],1)]},proxy:!0}]),model:{value:t.termsCheckboxModel,callback:function(e){t.termsCheckboxModel=e},expression:"termsCheckboxModel"}})],1),a("div",{staticStyle:{"text-align":"center"},attrs:{id:"payment-button-box"}},[a("v-btn",{ref:"paymentButton",staticClass:"mt-0",attrs:{id:"payment-button",type:"submit",color:"orange darken-3",disabled:!t.payBtnValid}},[t._v(" "+t._s(t.$t("step-pay.bookFlight"))+" ")])],1),a("div",{attrs:{id:"stripe-error-message"}})],1)],1)],2)],1)},i=[],s=a("1da1"),r=(a("96cf"),a("d3b7"),a("159b"),a("36ad")),o=a("b166"),l=a("e3ee"),c=a("7828"),d=a("3f5e"),u=a("ab5d"),p="https://js.stripe.com/v3",h=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,f="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",m=function(){for(var t=document.querySelectorAll('script[src^="'.concat(p,'"]')),e=0;e<t.length;e++){var a=t[e];if(h.test(a.src))return a}return null},g=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",a=document.createElement("script");a.src="".concat(p).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(a),a},v=function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.16.0",startTime:e})},y=null,b=function(t){return null!==y||(y=new Promise((function(e,a){if("undefined"!==typeof window)if(window.Stripe&&t&&console.warn(f),window.Stripe)e(window.Stripe);else try{var n=m();n&&t?console.warn(f):n||(n=g(t)),n.addEventListener("load",(function(){window.Stripe?e(window.Stripe):a(new Error("Stripe.js not available"))})),n.addEventListener("error",(function(){a(new Error("Failed to load Stripe.js"))}))}catch(i){return void a(i)}else e(null)}))),y},x=function(t,e,a){if(null===t)return null;var n=t.apply(void 0,e);return v(n,a),n},w=Promise.resolve().then((function(){return b(null)})),_=!1;w["catch"]((function(t){_||console.warn(t)}));var S=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];_=!0;var n=Date.now();return w.then((function(t){return x(t,e,n)}))},k={name:"Step_Pay",components:{PageHeader:r["a"]},data:function(){return{stripe:null,hasCardErrors:!1,payLoading:!1,message:this.$store.state.orderMessage,elements:void 0,card:void 0,flightDetails:this.$store.getters.getFlightFromID(this.$store.state.selectedFlight),totalPassengers:this.$store.state.totalPassengers,wantsPhotos:this.$store.state.wantsPhotos,videoPrice:this.$store.state._videoPrice,termsCheckboxModel:!1,orderOverlay:!1,myLocal:c["a"],tempClientSecret:"",stripePayFormValid:!1,stripePaymentFormLoading:!0}},beforeMount:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Development Mode - Test Stripe Order."),e.next=3,S("pk_test_51ION3qE6VjXXKzJ2c9Lxf0eoYCe6BuizG3Q7OrsNIEOWA4NMlpP3ycbEW7KwaFpJYlA4MFOeosbDuyJuIWMS5xn200GcQxogOw");case 3:return t.stripe=e.sent,e.next=6,fetch("https://gateway.flyzermatt.com/create-customer");case 6:return a=e.sent,e.next=9,a.json();case 9:n=e.sent,t.tempClientSecret=n.clientSecret,i={clientSecret:t.tempClientSecret,locale:t.$i18n.locale},t.elements=t.stripe.elements(i),s=t.elements.create("payment"),r=t,s.on("ready",(function(){r.stripePaymentFormLoading=!1})),s.on("change",(function(t){t.complete&&(r.stripePayFormValid=!0)})),s.mount("#stripe-payment-element");case 18:case"end":return e.stop()}}),e)})))()},beforeUpdate:function(){"en"===this.$i18n.locale&&(this.myLocal=c["a"]),"de"===this.$i18n.locale&&(this.myLocal=d["a"]),"ko"===this.$i18n.locale&&(this.myLocal=u["a"])},computed:{payBtnValid:function(){return!0===this.stripePayFormValid&&!0===this.termsCheckboxModel},isDev:function(){return this.$store.state._DEV},findOfficeDialog:{get:function(){return this.$store.state.findOfficeDialog},set:function(t){return this.$store.dispatch("showFindOfficeDialog",t)}},meetingTimesString:function(){var t=this,e="",a=this.$store.state.slotPassengersObj.slotsList;return a.forEach((function(a){t.isObjEmpty(a)||a.passengers>0&&(e+=a.passengers+" "+t.$tc("step-pay.people",a.passengers)+" @ "+a.timeString+". ")})),e},flightDate:function(){return this.isObjEmpty(this.$store.state.flightDate)?"":Object(o["a"])(Object(l["a"])(this.$store.state.flightDate),"EE, MMMM do, yyyy",{locale:this.myLocal})}},methods:{focusBookingMessage:function(){this.scrollToId("#scrollTarget");var t=this;setTimeout((function(){t.$refs.bookingMessage.focus()}),500)},onMessageBlur:function(){this.$store.dispatch("setOrderMessage",this.message)},onOrderBtn:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var a,n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.elements,e.next=3,t.stripe.confirmSetup({elements:a,confirmParams:{return_url:"http://localhost:8080/thanks"}});case 3:n=e.sent,i=n.error,i&&(s=document.querySelector("#error-message"),s.textContent=i.message,console.log(i.message));case 6:case"end":return e.stop()}}),e)})))()}},watch:{"$store.state.locale":function(t){this.elements.update({locale:t})}}},C=k,$=(a("0aa2"),a("2877")),P=a("6544"),O=a.n(P),j=a("8336"),I=a("15fd"),B=a("5530"),E=(a("25f0"),a("6ca7"),a("ec29"),a("9d26")),L=a("c37a"),D=a("fe09"),F=["title"],M=D["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data:function(){return{inputIndeterminate:this.indeterminate}},computed:{classes:function(){return Object(B["a"])(Object(B["a"])({},L["a"].options.computed.classes.call(this)),{},{"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate})},computedIcon:function(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState:function(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate:function(t){var e=this;this.$nextTick((function(){return e.inputIndeterminate=t}))},inputIndeterminate:function(t){this.$emit("update:indeterminate",t)},isActive:function(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox:function(){var t=this.attrs$,e=(t.title,Object(I["a"])(t,F));return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(E["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",Object(B["a"])(Object(B["a"])({},e),{},{"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()})),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot:function(){return[this.genCheckbox(),this.genLabel()]}}}),V=(a("4de4"),a("b64b"),a("2ca0"),a("99af"),a("20f68"),a("4b85"),a("498a"),a("a15b"),a("2b0e"));function T(t){return V["default"].extend({name:"v-".concat(t),functional:!0,props:{id:String,tag:{type:String,default:"div"}},render:function(e,a){var n=a.props,i=a.data,s=a.children;i.staticClass="".concat(t," ").concat(i.staticClass||"").trim();var r=i.attrs;if(r){i.attrs={};var o=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}));o.length&&(i.staticClass+=" ".concat(o.join(" ")))}return n.id&&(i.domProps=i.domProps||{},i.domProps.id=n.id),e(n.tag,i,s)}})}var H=a("d9f7"),R=T("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render:function(t,e){var a,n=e.props,i=e.data,s=e.children,r=i.attrs;return r&&(i.attrs={},a=Object.keys(r).filter((function(t){if("slot"===t)return!1;var e=r[t];return t.startsWith("data-")?(i.attrs[t]=e,!1):e||"string"===typeof e}))),n.id&&(i.domProps=i.domProps||{},i.domProps.id=n.id),t(n.tag,Object(H["a"])(i,{staticClass:"container",class:Array({"container--fluid":n.fluid}).concat(a||[])}),s)}}),z=a("cd55"),N=a("49e2"),A=a("c865"),G=a("0393"),W=a("132d"),q=a("0fd9"),J=a("1f4f"),K=a("3835"),Q=(a("ac1f"),a("1276"),a("d81d"),a("a630"),a("3ca3"),a("5319"),a("1f09"),a("c995")),X=a("24b2"),Y=a("7560"),U=a("58df"),Z=a("80d2"),tt=Object(U["a"])(Q["a"],X["a"],Y["a"]).extend({name:"VSkeletonLoader",props:{boilerplate:Boolean,loading:Boolean,tile:Boolean,transition:String,type:String,types:{type:Object,default:function(){return{}}}},computed:{attrs:function(){return this.isLoading?this.boilerplate?{}:Object(B["a"])({"aria-busy":!0,"aria-live":"polite",role:"alert"},this.$attrs):this.$attrs},classes:function(){return Object(B["a"])(Object(B["a"])({"v-skeleton-loader--boilerplate":this.boilerplate,"v-skeleton-loader--is-loading":this.isLoading,"v-skeleton-loader--tile":this.tile},this.themeClasses),this.elevationClasses)},isLoading:function(){return!("default"in this.$scopedSlots)||this.loading},rootTypes:function(){return Object(B["a"])({actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, card-heading","card-avatar":"image, list-item-avatar","card-heading":"heading",chip:"chip","date-picker":"list-item, card-heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",paragraph:"text@3",sentences:"text@2",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"heading, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"table-cell@6","table-cell":"text","table-tfoot":"text@2, avatar@2",text:"text"},this.types)}},methods:{genBone:function(t,e){return this.$createElement("div",{staticClass:"v-skeleton-loader__".concat(t," v-skeleton-loader__bone")},e)},genBones:function(t){var e=this,a=t.split("@"),n=Object(K["a"])(a,2),i=n[0],s=n[1],r=function(){return e.genStructure(i)};return Array.from({length:s}).map(r)},genStructure:function(t){var e=[];t=t||this.type||"";var a=this.rootTypes[t]||"";if(t===a);else{if(t.indexOf(",")>-1)return this.mapBones(t);if(t.indexOf("@")>-1)return this.genBones(t);a.indexOf(",")>-1?e=this.mapBones(a):a.indexOf("@")>-1?e=this.genBones(a):a&&e.push(this.genStructure(a))}return[this.genBone(t,e)]},genSkeleton:function(){var t=[];return this.isLoading?t.push(this.genStructure()):t.push(Object(Z["o"])(this)),this.transition?this.$createElement("transition",{props:{name:this.transition},on:{afterEnter:this.resetStyles,beforeEnter:this.onBeforeEnter,beforeLeave:this.onBeforeLeave,leaveCancelled:this.resetStyles}},t):t},mapBones:function(t){return t.replace(/\s/g,"").split(",").map(this.genStructure)},onBeforeEnter:function(t){this.resetStyles(t),this.isLoading&&(t._initialStyle={display:t.style.display,transition:t.style.transition},t.style.setProperty("transition","none","important"))},onBeforeLeave:function(t){t.style.setProperty("display","none","important")},resetStyles:function(t){t._initialStyle&&(t.style.display=t._initialStyle.display||"",t.style.transition=t._initialStyle.transition,delete t._initialStyle)}},render:function(t){return t("div",{staticClass:"v-skeleton-loader",attrs:this.attrs,on:this.$listeners,class:this.classes,style:this.isLoading?this.measurableStyles:void 0},[this.genSkeleton()])}}),et=(a("a9e3"),a("1681"),a("8654")),at=Object(U["a"])(et["a"]),nt=at.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(B["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},et["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"}},genInput:function(){var t=et["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){et["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),it=a("3a2f"),st=Object($["a"])(C,n,i,!1,null,"e09efb68",null);e["default"]=st.exports;O()(st,{VBtn:j["a"],VCheckbox:M,VContainer:R,VExpansionPanel:z["a"],VExpansionPanelContent:N["a"],VExpansionPanelHeader:A["a"],VExpansionPanels:G["a"],VIcon:W["a"],VRow:q["a"],VSimpleTable:J["a"],VSkeletonLoader:tt,VTextarea:nt,VTooltip:it["a"]})},"6ca7":function(t,e,a){}}]);
//# sourceMappingURL=Pay.e8a605d0.js.map