(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Pay"],{"1e2d":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"stepThanks"},[r("PageHeader",{attrs:{title:"Payment Cancelled"}},[t._v(" Payment didn't work for whatever reason. Give a message and probably just go back to the normal payment page... (let them try a different payment method) ")])],1)},s=[],a=r("36ad"),o={name:"Step_Cancelled",components:{PageHeader:a["a"]},data:function(){return{}},created:function(){},computed:{},methods:{}},i=o,c=(r("9473"),r("2877")),l=Object(c["a"])(i,n,s,!1,null,"8ba67874",null);e["default"]=l.exports},"1f4f":function(t,e,r){"use strict";r("a9e3");var n=r("5530"),s=(r("8b37"),r("80d2")),a=r("7560"),o=r("58df");e["a"]=Object(o["a"])(a["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(n["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(s["f"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"2e0e":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"stepPay"},[r("PageHeader",{attrs:{title:"4. Place Order"}},[t._v(" Using Stripe checkout to handle our online payments here. This is currently just a test environment. ")]),[r("v-simple-table",{staticClass:"elevation-1",attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left"},[t._v(" Qty ")]),r("th",{staticClass:"text-left"},[t._v(" Description ")]),r("th",{staticClass:"text-left"},[t._v(" Price in CHF ")])])]),r("tbody",[r("tr",[r("td",[t._v("2")]),r("td",[t._v(t._s(t.orderLineItems.name)+" Flight")]),r("td",[t._v(t._s(t.orderLineItems.price_CHF)+".-")])]),r("tr",[r("td",[t._v("2")]),r("td",[t._v("Photos & Videos")]),r("td",[t._v("40.-")])]),r("tr",[r("td",{staticClass:"grey--text text-caption",staticStyle:{"text-align":"center"},attrs:{colspan:"3"}},[t._v(" This row will display total prices ")])])])]},proxy:!0}])})],r("div",{staticClass:"mt-4",staticStyle:{"text-align":"center"},attrs:{id:"payment-button-box"}},[r("v-btn",{ref:"paymentButton",staticClass:"mt-4",attrs:{id:"payment-button",type:"submit",color:"warning darken-1"},on:{click:t.onOrderBtn}},[t._v(" Pay Now ")])],1),r("br"),r("br"),t._m(0),t._m(1)],2)},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",[t._v(" Copy one of the numbers below to test payment on the Stripe page. "),r("br"),t._v(" "),r("br"),t._v(" Use any email, card date (in future), CVC and Name on card. ")])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ul",[r("li",[t._v("Visa standard card with success: 4000007560000009 "),r("br")]),r("li",[t._v("3D Secure with success: 4000002500003155")]),r("li",[t._v("Fail, insuffecient funds: 4000000000009995")]),r("li",[t._v("Fail, card has expired: 4000000000000069")])])}],a=(r("d3b7"),r("96cf"),r("1da1")),o=r("36ad"),i="https://js.stripe.com/v3",c=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,l="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",d=function(){for(var t=document.querySelectorAll('script[src^="'.concat(i,'"]')),e=0;e<t.length;e++){var r=t[e];if(c.test(r.src))return r}return null},u=function(t){var e=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",r=document.createElement("script");r.src="".concat(i).concat(e);var n=document.head||document.body;if(!n)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return n.appendChild(r),r},h=function(t,e){t&&t._registerWrapper&&t._registerWrapper({name:"stripe-js",version:"1.12.1",startTime:e})},p=null,f=function(t){return null!==p||(p=new Promise((function(e,r){if("undefined"!==typeof window)if(window.Stripe&&t&&console.warn(l),window.Stripe)e(window.Stripe);else try{var n=d();n&&t?console.warn(l):n||(n=u(t)),n.addEventListener("load",(function(){window.Stripe?e(window.Stripe):r(new Error("Stripe.js not available"))})),n.addEventListener("error",(function(){r(new Error("Failed to load Stripe.js"))}))}catch(s){return void r(s)}else e(null)}))),p},m=function(t,e,r){if(null===t)return null;var n=t.apply(void 0,e);return h(n,r),n},v=Promise.resolve().then((function(){return f(null)})),g=!1;v["catch"]((function(t){g||console.warn(t)}));var b=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];g=!0;var n=Date.now();return v.then((function(t){return m(t,e,n)}))},y={name:"Step_Pay",components:{PageHeader:o["a"]},data:function(){return{stripe:null,hasCardErrors:!1,payEnabled:!1,payLoading:!1,message:" - - ",elements:void 0,card:void 0}},created:function(){var t=this,e=this.$store.state.orderID;console.log(e),""!==e&&void 0!==e||(e=null);var r={orderId:e,isTest:!0,email:this.$store.state.contactEmail,phone:this.$store.state.contactPhone,gender:this.$store.getters.getSexById(0),name:this.$store.getters.getNameById(0),totalPassengers:this.$store.getters.getTotalPassengers,flightDate:this.$store.state.flightDate,flightId:this.$store.state.selectedFlight,photos:this.$store.state.wantsPhotos,passengerJSON:this.$store.state.passengerObjList,slotJSON:this.$store.state.slotPassengersObj};fetch("https://gateway.flyzermatt.com/new-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(t){return t.json()})).then((function(e){e.orderID>0&&t.$store.dispatch("setOrderId",e.orderID)})).catch((function(t){console.log("Getting an error back from fetch: https://gateway.flyzermatt.com/new-order"),console.error("Error:",t)}))},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b("pk_test_51IGntPLZ4REFUmfdjQL7LCGwclVtgzurrVvVhr5P8htOMohzdfAQke3p0Dd3zFsKcLuWtiFXK2x2RnXOCRQt1x8j00XqKkjnx2");case 2:t.stripe=e.sent;case 3:case"end":return e.stop()}}),e)})))()},computed:{orderLineItems:function(){return this.$store.getters.getFlightFromID(300)}},methods:{onOrderBtn:function(){var t=this;fetch("https://gateway.flyzermatt.com/create-checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:this.$store.state.contactEmail,orderId:this.$store.state.orderID})}).then((function(t){return t.json()})).then((function(e){return t.stripe.redirectToCheckout({sessionId:e.id})})).then((function(t){t.error&&alert(t.error.message)})).catch((function(t){console.log("Getting an error back in the 'catch'"),console.error("Error:",t)}))}},watch:{}},w=y,_=(r("d1e4"),r("2877")),S=r("6544"),x=r.n(S),$=r("8336"),C=r("1f4f"),P=Object(_["a"])(w,n,s,!1,null,"061cde18",null);e["default"]=P.exports;x()(P,{VBtn:$["a"],VSimpleTable:C["a"]})},5930:function(t,e,r){},"8b37":function(t,e,r){},9473:function(t,e,r){"use strict";r("b321")},b321:function(t,e,r){},d1e4:function(t,e,r){"use strict";r("5930")}}]);
//# sourceMappingURL=Pay.7abd9ce6.js.map